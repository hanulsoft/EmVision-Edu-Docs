{% capture TEXTBOOK_CONTENT %}
{% for toc_item in site.data.toc -%}
    {% assign chapter_url = toc_item[0] | prepend: '/' | append: '/' -%}
    {% assign chapter_doc = site.html_pages | where: 'dir', chapter_url | first -%}
    {{ chapter_doc.content | markdownify }}
    {% for sub_item in toc_item[1] -%}
        {% assign sub_url = sub_item | prepend: chapter_url | append: '/' -%}
        {% assign sub_doc = site.html_pages | where: 'dir', sub_url | first -%}
        {{ sub_doc.content | markdownify }}
    {% endfor -%}
{% endfor -%}
{% endcapture -%}
<!DOCTYPE html>
<html lang="ko">
{% include head.html -%}
<body class="print-mode">
{% if page.url == "/" -%}
<main id="main-contents" calss="print-mode">
{% else -%}
<main id="main-contents" class="open-sidebar print-mode">
{% endif -%}
{% include nav.html -%}
{% include header.html -%}
<div id="print-container">
<article id="article" class="print">
    <div id="print-raw-contents">{{ TEXTBOOK_CONTENT }}</div>
    <div class="print-page">
        <div class="print-content" style="height: 100%; position: relative;">
            <style>
                div#main-title img {
                    background-color:transparent;
                    border:none;
                    box-shadow:none;
                    filter: none;
                    width: 18em;
                }
                div#logo-box img {
                    background-color:transparent;
                    border:none;
                    box-shadow:none;
                    filter: none;
                    width: 16em;
                }
                div#main-title h1 {
                    font-family: 'Noto Sans KR', sans-serif;
                    text-align: right;
                    margin: 0 !important;
                    padding: 0 !important;
                    font-size: 6em;
                    letter-spacing: 0em;
                    line-height: 1.1;
                }
                div#main-title p {
                    text-align: right;
                    margin:0;
                    padding:0;
                }
                div#main-title {
                    display: grid;
                    grid-template-columns: 1fr auto;
                    gap: 1em;
                    align-items: center;
                }
                div#logo-box {
                    position: absolute;
                    bottom: 0;
                    right: 0;
                }
            </style>
            <div id="main-title">
                <div>
                    <h1>EmVision</h1>
                    <p>Embedded Vision AI Prototyping Platform</p>
                    <p>임베디드 비전 AI 프로토타이핑 플랫폼</p>
                </div>
                <img src="{{ "assets/logo.png" | absolute_url }}">
            </div>
            <div id="logo-box">
                <img src="{{ "assets/logo-hanulsoft.png" | absolute_url }}">
            </div>
        </div>
    </div>
    <div class="print-page">
        <div class="print-content" style="height: 100%;"></div>
    </div>
    <div class="print-page">
        <div class="print-content" style="height: 100%;">
        <h1 class="main-title">차례</h1>
        <ul id="toc-list"></ul>
        </div>
    </div>
</article>
</div>
<hr class="noPrint">
{% include footer.html -%}
</main>
</body>
<script defer src="{{ "js/print-onload.js" | absolute_url }}"></script>
</html>